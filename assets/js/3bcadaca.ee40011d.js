"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[81374],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=p(n),c=r,h=m["".concat(s,".").concat(c)]||m[c]||u[c]||o;return n?a.createElement(h,i(i({ref:t},d),{},{components:n})):a.createElement(h,i({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},91420:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>p,toc:()=>u});n(67294);var a=n(3905);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const l={title:"useDrawerForm"},s=void 0,p={unversionedId:"ui-integrations/ant-design/hooks/use-drawer-form/index",id:"ui-integrations/ant-design/hooks/use-drawer-form/index",title:"useDrawerForm",description:"The useDrawerForm hook allows you to manage a form within a Drawer. It returns the Ant Design ` and ` components props.",source:"@site/docs/ui-integrations/ant-design/hooks/use-drawer-form/index.md",sourceDirName:"ui-integrations/ant-design/hooks/use-drawer-form",slug:"/ui-integrations/ant-design/hooks/use-drawer-form/",permalink:"/ithub-itday-april-refine/docs/ui-integrations/ant-design/hooks/use-drawer-form/",draft:!1,editUrl:"https://github.com/refinedev/refine/tree/master/documentation/docs/ui-integrations/ant-design/hooks/use-drawer-form/index.md",tags:[],version:"current",frontMatter:{title:"useDrawerForm"},sidebar:"mainSidebar",previous:{title:"useForm",permalink:"/ithub-itday-april-refine/docs/ui-integrations/ant-design/hooks/use-form/"},next:{title:"useModalForm",permalink:"/ithub-itday-april-refine/docs/ui-integrations/ant-design/hooks/use-modal-form/"}},d={},u=[{value:"Usage",id:"usage",level:2},{value:"Properties",id:"properties",level:2},{value:"syncWithLocation",id:"syncwithlocation",level:3},{value:"overtimeOptions",id:"overtimeoptions",level:3},{value:"autoSave",id:"autosave",level:3},{value:"enabled",id:"enabled",level:4},{value:"debounce",id:"debounce",level:4},{value:"onFinish",id:"onfinish",level:4},{value:"invalidateOnUnmount",id:"invalidateonunmount",level:4},{value:"invalidateOnClose",id:"invalidateonclose",level:4},{value:"Return values",id:"return-values",level:2},{value:"show",id:"show",level:3},{value:"close",id:"close",level:3},{value:"saveButtonProps",id:"savebuttonprops",level:3},{value:"deleteButtonProps",id:"deletebuttonprops",level:3},{value:"formProps",id:"formprops",level:3},{value:"drawerProps",id:"drawerprops",level:3},{value:"width",id:"width",level:4},{value:"onClose",id:"onclose",level:4},{value:"open",id:"open",level:4},{value:"forceRender",id:"forcerender",level:4},{value:"overtime",id:"overtime",level:3},{value:"autoSaveProps",id:"autosaveprops",level:3},{value:"FAQ",id:"faq",level:2},{value:"How can I change the form data before submitting it to the API?",id:"how-can-i-change-the-form-data-before-submitting-it-to-the-api",level:3},{value:"API Parameters",id:"api-parameters",level:2},{value:"Properties",id:"properties-1",level:3},{value:"Type Parameters",id:"type-parameters",level:3},{value:"Return Value",id:"return-value",level:3},{value:"Example",id:"example",level:2}],m=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",t)},c=m("Tabs"),h=m("TabItem"),k=m("PropsTable"),f=m("CodeSandboxExample"),N={toc:u};function g(e){var{components:t}=e,n=i(e,["components"]);return(0,a.kt)("wrapper",o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){r(e,t,n[t])}))}return e}({},N,n),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"useDrawerForm")," hook allows you to manage a form within a Drawer. It returns the Ant Design ",(0,a.kt)("a",{parentName:"p",href:"https://ant.design/components/form/"},(0,a.kt)("inlineCode",{parentName:"a"},"<Form>"))," and ",(0,a.kt)("a",{parentName:"p",href:"https://ant.design/components/drawer/"},(0,a.kt)("inlineCode",{parentName:"a"},"<Drawer>"))," components props."),(0,a.kt)("p",null,"The",(0,a.kt)("inlineCode",{parentName:"p"},"useDrawerForm")," hook is extended from ",(0,a.kt)("a",{parentName:"p",href:"/docs/ui-integrations/ant-design/hooks/use-form"},(0,a.kt)("inlineCode",{parentName:"a"},"useForm"))," from the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/refinedev/refine/tree/master/packages/antd"},"@refinedev/antd")," package. This means that you can use all the features of ",(0,a.kt)("a",{parentName:"p",href:"/docs/ui-integrations/ant-design/hooks/use-form"},(0,a.kt)("inlineCode",{parentName:"a"},"useForm"))," hook with it."),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("p",null,"We will show two examples, one for creating a post and one for editing it. Let's see how ",(0,a.kt)("inlineCode",{parentName:"p"},"useDrwaerForm")," is used in them."),(0,a.kt)(c,{defaultValue:"create",values:[{label:"create",value:"create"},{label:"edit",value:"edit"}],mdxType:"Tabs"},(0,a.kt)(h,{value:"create",mdxType:"TabItem"},(0,a.kt)("p",null,"In this example, we will show you how to ",(0,a.kt)("inlineCode",{parentName:"p"},'"create"')," a record with ",(0,a.kt)("inlineCode",{parentName:"p"},"useDrawerForm"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"live url=http://localhost:3000/posts previewHeight=420px",live:!0,url:"http://localhost:3000/posts",previewHeight:"420px"},'setInitialRoutes(["/posts"]);\n\n// visible-block-start\nimport { HttpError } from "@refinedev/core";\nimport React from "react";\n\nimport { Create, List, useDrawerForm, useTable } from "@refinedev/antd";\nimport { Drawer, Form, Input, Select, Table } from "antd";\n\ninterface IPost {\n  id: number;\n  title: string;\n  status: "published" | "draft" | "rejected";\n}\n\nconst PostList: React.FC = () => {\n  const { tableProps } = useTable<IPost, HttpError>();\n\n  // highlight-start\n  const { formProps, drawerProps, show, saveButtonProps } = useDrawerForm<\n    IPost,\n    HttpError,\n    IPost\n  >({\n    action: "create",\n  });\n  // highlight-end\n\n  return (\n    <>\n      <List\n        canCreate\n        // highlight-start\n        createButtonProps={{\n          onClick: () => {\n            show();\n          },\n        }}\n        // highlight-end\n      >\n        <Table {...tableProps} rowKey="id">\n          <Table.Column dataIndex="id" title="ID" />\n          <Table.Column dataIndex="title" title="Title" />\n        </Table>\n      </List>\n      {/* highlight-start */}\n      <Drawer {...drawerProps}>\n        <Create saveButtonProps={saveButtonProps}>\n          <Form {...formProps} layout="vertical">\n            <Form.Item\n              label="Title"\n              name="title"\n              rules={[\n                {\n                  required: true,\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              label="Status"\n              name="status"\n              rules={[\n                {\n                  required: true,\n                },\n              ]}\n            >\n              <Select\n                options={[\n                  {\n                    label: "Published",\n                    value: "published",\n                  },\n                  {\n                    label: "Draft",\n                    value: "draft",\n                  },\n                  {\n                    label: "Rejected",\n                    value: "rejected",\n                  },\n                ]}\n              />\n            </Form.Item>\n          </Form>\n        </Create>\n      </Drawer>\n      {/* highlight-end */}\n    </>\n  );\n};\n\n// visible-block-end\nsetRefineProps({\n  resources: [\n    {\n      name: "posts",\n      list: PostList,\n    },\n  ],\n});\n\nrender(<RefineAntdDemo />);\n'))),(0,a.kt)(h,{value:"edit",mdxType:"TabItem"},(0,a.kt)("p",null,"In this example, we will show you how to ",(0,a.kt)("inlineCode",{parentName:"p"},'"edit"')," a record with ",(0,a.kt)("inlineCode",{parentName:"p"},"useDrawerForm"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"live url=http://localhost:3000/posts previewHeight=420px",live:!0,url:"http://localhost:3000/posts",previewHeight:"420px"},'setInitialRoutes(["/posts"]);\n\n// visible-block-start\nimport { HttpError } from "@refinedev/core";\nimport React from "react";\n\nimport {\n  Edit,\n  EditButton,\n  List,\n  useDrawerForm,\n  useTable,\n} from "@refinedev/antd";\nimport { Drawer, Form, Input, Select, Space, Table } from "antd";\n\ninterface IPost {\n  id: number;\n  title: string;\n  status: "published" | "draft" | "rejected";\n}\n\nconst PostList: React.FC = () => {\n  const { tableProps } = useTable<IPost, HttpError>();\n\n  // highlight-start\n  const { formProps, drawerProps, show, saveButtonProps, id } = useDrawerForm<\n    IPost,\n    HttpError,\n    IPost\n  >({\n    action: "edit",\n    warnWhenUnsavedChanges: true,\n  });\n  // highlight-end\n\n  return (\n    <>\n      <List\n        canCreate\n        // highlight-start\n        createButtonProps={{\n          onClick: () => {\n            show();\n          },\n        }}\n        // highlight-end\n      >\n        <Table {...tableProps} rowKey="id">\n          <Table.Column dataIndex="id" title="ID" />\n          <Table.Column dataIndex="title" title="Title" />\n          <Table.Column<IPost>\n            title="Actions"\n            dataIndex="actions"\n            key="actions"\n            render={(_, record) => (\n              // highlight-start\n              <Space>\n                <EditButton\n                  hideText\n                  size="small"\n                  recordItemId={record.id}\n                  onClick={() => show(record.id)}\n                />\n              </Space>\n              // highlight-end\n            )}\n          />\n        </Table>\n      </List>\n      {/* highlight-start */}\n      <Drawer {...drawerProps}>\n        <Edit saveButtonProps={saveButtonProps} recordItemId={id}>\n          <Form {...formProps} layout="vertical">\n            <Form.Item\n              label="Title"\n              name="title"\n              rules={[\n                {\n                  required: true,\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              label="Status"\n              name="status"\n              rules={[\n                {\n                  required: true,\n                },\n              ]}\n            >\n              <Select\n                options={[\n                  {\n                    label: "Published",\n                    value: "published",\n                  },\n                  {\n                    label: "Draft",\n                    value: "draft",\n                  },\n                  {\n                    label: "Rejected",\n                    value: "rejected",\n                  },\n                ]}\n              />\n            </Form.Item>\n          </Form>\n        </Edit>\n      </Drawer>\n      {/* highlight-end */}\n    </>\n  );\n};\n\n// visible-block-end\nsetRefineProps({\n  resources: [\n    {\n      name: "posts",\n      list: PostList,\n    },\n  ],\n});\n\nrender(<RefineAntdDemo />);\n')),(0,a.kt)("p",null,"Refine doesn't automatically add a ",(0,a.kt)("inlineCode",{parentName:"p"},"<EditButton/>")," to the each record in ",(0,a.kt)("inlineCode",{parentName:"p"},"<PostList>")," which opens the edit form in ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>")," when clicked."),(0,a.kt)("p",null,"So, we have to put the ",(0,a.kt)("inlineCode",{parentName:"p"},"<EditButton/>")," on our list manually. In that way, ",(0,a.kt)("inlineCode",{parentName:"p"},"<Edit>")," form in ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>")," can fetch data by the record ",(0,a.kt)("inlineCode",{parentName:"p"},"id"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'<Table.Column<IPost>\n  title="Actions"\n  dataIndex="actions"\n  key="actions"\n  render={(_value, record) => <EditButton onClick={() => show(record.id)} />}\n/>\n')),(0,a.kt)("p",null,"Don't forget to pass the record ",(0,a.kt)("inlineCode",{parentName:"p"},'"id"')," to ",(0,a.kt)("inlineCode",{parentName:"p"},"show")," to fetch the record data. This is necessary for both ",(0,a.kt)("inlineCode",{parentName:"p"},'"edit"')," and ",(0,a.kt)("inlineCode",{parentName:"p"},'"clone"')," forms."))),(0,a.kt)("h2",{id:"properties"},"Properties"),(0,a.kt)("p",null,"All ",(0,a.kt)("a",{parentName:"p",href:"/docs/ui-integrations/ant-design/hooks/use-form"},(0,a.kt)("inlineCode",{parentName:"a"},"useForm"))," props are also available in ",(0,a.kt)("inlineCode",{parentName:"p"},"useDrawerForm"),". You can find descriptions on the ",(0,a.kt)("a",{parentName:"p",href:"/docs/ui-integrations/ant-design/hooks/use-form#properties"},(0,a.kt)("inlineCode",{parentName:"a"},"useForm"))," documentation."),(0,a.kt)("h3",{id:"syncwithlocation"},"syncWithLocation"),(0,a.kt)("p",null,"When ",(0,a.kt)("inlineCode",{parentName:"p"},"syncWithLocation")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),", the drawers visibility state and the ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," of the record will be synced with the URL. It is ",(0,a.kt)("inlineCode",{parentName:"p"},"false")," by default."),(0,a.kt)("p",null,"This property can also be set as an object ",(0,a.kt)("inlineCode",{parentName:"p"},"{ key: string; syncId?: boolean }")," to customize the key of the URL query parameter. ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," will be synced with the URL only if ",(0,a.kt)("inlineCode",{parentName:"p"},"syncId")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'const drawerForm = useDrawerForm({\n  syncWithLocation: { key: "my-modal", syncId: true },\n});\n')),(0,a.kt)("h3",{id:"overtimeoptions"},"overtimeOptions"),(0,a.kt)("p",null,"If you want loading overtime for the request, you can pass the ",(0,a.kt)("inlineCode",{parentName:"p"},"overtimeOptions")," prop to the this hook. It is useful when you want to show a loading indicator when the request takes too long.\n",(0,a.kt)("inlineCode",{parentName:"p"},"interval")," is the time interval in milliseconds. ",(0,a.kt)("inlineCode",{parentName:"p"},"onInterval")," is the function that will be called on each interval."),(0,a.kt)("p",null,"Return ",(0,a.kt)("inlineCode",{parentName:"p"},"overtime")," object from this hook. ",(0,a.kt)("inlineCode",{parentName:"p"},"elapsedTime")," is the elapsed time in milliseconds. It becomes ",(0,a.kt)("inlineCode",{parentName:"p"},"undefined")," when the request is completed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"const { overtime } = useDrawerForm({\n  //...\n  overtimeOptions: {\n    interval: 1000,\n    onInterval(elapsedInterval) {\n      console.log(elapsedInterval);\n    },\n  },\n});\n\nconsole.log(overtime.elapsedTime); // undefined, 1000, 2000, 3000 4000, ...\n\n// You can use it like this:\n{\n  elapsedTime >= 4000 && <div>this takes a bit longer than expected</div>;\n}\n")),(0,a.kt)("h3",{id:"autosave"},"autoSave"),(0,a.kt)("p",null,"If you want to save the form automatically after some delay when user edits the form, you can pass true to ",(0,a.kt)("inlineCode",{parentName:"p"},"autoSave.enabled")," prop."),(0,a.kt)("p",null,"By default the ",(0,a.kt)("inlineCode",{parentName:"p"},"autoSave")," feature does not invalidate queries. However, you can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"invalidateOnUnmount")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"invalidateOnClose")," props to invalidate queries upon unmount or close."),(0,a.kt)("p",null,"It also supports ",(0,a.kt)("inlineCode",{parentName:"p"},"onMutationSuccess")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"onMutationError")," callback functions. You can use ",(0,a.kt)("inlineCode",{parentName:"p"},"isAutoSave")," parameter to determine whether the mutation is triggered by ",(0,a.kt)("inlineCode",{parentName:"p"},"autoSave")," or not."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"autoSave")," feature operates exclusively in ",(0,a.kt)("inlineCode",{parentName:"p"},"edit")," mode. Users can take advantage of this feature while editing data, as changes are automatically saved in editing mode. However, when creating new data, manual saving is still required."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"onMutationSuccess")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"onMutationError")," callbacks will be called after the mutation is successful or failed."),(0,a.kt)("h4",{id:"enabled"},"enabled"),(0,a.kt)("p",null,"To enable the ",(0,a.kt)("inlineCode",{parentName:"p"},"autoSave")," feature, set the ",(0,a.kt)("inlineCode",{parentName:"p"},"enabled")," parameter to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),". Default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"useDrawerForm({\n  autoSave: {\n    enabled: true,\n  },\n});\n")),(0,a.kt)("h4",{id:"debounce"},"debounce"),(0,a.kt)("p",null,"Set the debounce time for the ",(0,a.kt)("inlineCode",{parentName:"p"},"autoSave")," prop. Default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"1000")," milliseconds."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"useDrawerForm({\n  autoSave: {\n    enabled: true,\n    // highlight-next-line\n    debounce: 2000,\n  },\n});\n")),(0,a.kt)("h4",{id:"onfinish"},"onFinish"),(0,a.kt)("p",null,"If you want to modify the data before sending it to the server, you can use ",(0,a.kt)("inlineCode",{parentName:"p"},"onFinish")," callback function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'useDrawerForm({\n  autoSave: {\n    enabled: true,\n    // highlight-start\n    onFinish: (values) => {\n      return {\n        foo: "bar",\n        ...values,\n      };\n    },\n    // highlight-end\n  },\n});\n')),(0,a.kt)("h4",{id:"invalidateonunmount"},"invalidateOnUnmount"),(0,a.kt)("p",null,"This prop is useful when you want to invalidate the ",(0,a.kt)("inlineCode",{parentName:"p"},"list"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"many")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"detail")," queries from the current resource when the hook is unmounted. By default, it invalidates the ",(0,a.kt)("inlineCode",{parentName:"p"},"list"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"many")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"detail")," queries associated with the current resource. Also, You can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"invalidates")," prop to select which queries to invalidate. Default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"useDrawerForm({\n  autoSave: {\n    enabled: true,\n    // highlight-next-line\n    invalidateOnUnmount: true,\n  },\n});\n")),(0,a.kt)("h4",{id:"invalidateonclose"},"invalidateOnClose"),(0,a.kt)("p",null,"This prop is useful when you want to invalidate the ",(0,a.kt)("inlineCode",{parentName:"p"},"list"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"many")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"detail")," queries from the current resource when the drawer is closed. By default, it invalidates the ",(0,a.kt)("inlineCode",{parentName:"p"},"list"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"many")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"detail")," queries associated with the current resource. Also, You can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"invalidates")," prop to select which queries to invalidate. Default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"useDrawerForm({\n  autoSave: {\n    enabled: true,\n    // highlight-next-line\n    invalidateOnClose: true,\n  },\n});\n")),(0,a.kt)("h2",{id:"return-values"},"Return values"),(0,a.kt)("h3",{id:"show"},"show"),(0,a.kt)("p",null,"A function that opens the ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>"),". It takes an optional ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," parameter. If ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," is provided, it will fetch the record data and fill the ",(0,a.kt)("inlineCode",{parentName:"p"},"<Form>")," with it."),(0,a.kt)("h3",{id:"close"},"close"),(0,a.kt)("p",null,"A function that closes the ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>"),". Same as ",(0,a.kt)("inlineCode",{parentName:"p"},"[onClose][#onClose]"),"."),(0,a.kt)("h3",{id:"savebuttonprops"},"saveButtonProps"),(0,a.kt)("p",null,"It contains the props needed by the ",(0,a.kt)("inlineCode",{parentName:"p"},'"submit"')," button within the ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>")," (disabled,loading etc.). When ",(0,a.kt)("inlineCode",{parentName:"p"},"saveButtonProps.onClick")," is called, it triggers ",(0,a.kt)("inlineCode",{parentName:"p"},"form.submit()"),". You can manually pass these props to your custom button."),(0,a.kt)("h3",{id:"deletebuttonprops"},"deleteButtonProps"),(0,a.kt)("p",null,"It contains the props needed by the ",(0,a.kt)("inlineCode",{parentName:"p"},'"delete"')," button within the ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>")," (disabled,loading etc.). When ",(0,a.kt)("inlineCode",{parentName:"p"},"deleteButtonProps.onSuccess")," is called, it triggers it sets ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"undefined")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"open")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),". You can manually pass these props to your custom button."),(0,a.kt)("h3",{id:"formprops"},"formProps"),(0,a.kt)("p",null,"It's required to manage ",(0,a.kt)("inlineCode",{parentName:"p"},"<Form>")," state and actions. Under the hood the ",(0,a.kt)("inlineCode",{parentName:"p"},"formProps")," came from ",(0,a.kt)("a",{parentName:"p",href:"/docs/ui-integrations/ant-design/hooks/use-form"},(0,a.kt)("inlineCode",{parentName:"a"},"useForm")),"."),(0,a.kt)("p",null,"It contains the props to manage the ",(0,a.kt)("a",{parentName:"p",href:"https://ant.design/components/form#api"},"Antd ",(0,a.kt)("inlineCode",{parentName:"a"},"<Form>"))," component such as ",(0,a.kt)("a",{parentName:"p",href:"/docs/ui-integrations/ant-design/hooks/use-form#return-values"},(0,a.kt)("em",{parentName:"a"},(0,a.kt)("inlineCode",{parentName:"em"},"onValuesChange"),", ",(0,a.kt)("inlineCode",{parentName:"em"},"initialValues"),", ",(0,a.kt)("inlineCode",{parentName:"em"},"onFieldsChange"),", ",(0,a.kt)("inlineCode",{parentName:"em"},"onFinish")," etc."))),(0,a.kt)("h3",{id:"drawerprops"},"drawerProps"),(0,a.kt)("p",null,"It's required to manage ",(0,a.kt)("a",{parentName:"p",href:"https://ant.design/components/drawer/#API"},(0,a.kt)("inlineCode",{parentName:"a"},"<Drawer>"))," state and actions."),(0,a.kt)("h4",{id:"width"},"width"),(0,a.kt)("p",null,"It's the width of the ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>"),". Default value is ",(0,a.kt)("inlineCode",{parentName:"p"},'"500px"'),"."),(0,a.kt)("h4",{id:"onclose"},"onClose"),(0,a.kt)("p",null,"A function that can close the ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>"),". It's useful when you want to close the ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>")," manually.\nWhen ",(0,a.kt)("a",{parentName:"p",href:"/docs/ui-integrations/ant-design/hooks/use-form#warnwhenunsavedchanges"},(0,a.kt)("inlineCode",{parentName:"a"},"warnWhenUnsavedChanges"))," is ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),", it will show a confirmation modal before closing the ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>"),". If you override this function, you have to handle this confirmation modal manually."),(0,a.kt)("h4",{id:"open"},"open"),(0,a.kt)("p",null,"Current visible state of ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>"),". Default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,a.kt)("h4",{id:"forcerender"},"forceRender"),(0,a.kt)("p",null,"It renders ",(0,a.kt)("inlineCode",{parentName:"p"},"<Drawer>")," instead of lazy rendering it. Default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,a.kt)("h3",{id:"overtime"},"overtime"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"overtime")," object is returned from this hook. ",(0,a.kt)("inlineCode",{parentName:"p"},"elapsedTime")," is the elapsed time in milliseconds. It becomes ",(0,a.kt)("inlineCode",{parentName:"p"},"undefined")," when the request is completed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"const { overtime } = useDrawerForm();\n\nconsole.log(overtime.elapsedTime); // undefined, 1000, 2000, 3000 4000, ...\n")),(0,a.kt)("h3",{id:"autosaveprops"},"autoSaveProps"),(0,a.kt)("p",null,"If ",(0,a.kt)("inlineCode",{parentName:"p"},"autoSave")," is enabled, this hook returns ",(0,a.kt)("inlineCode",{parentName:"p"},"autoSaveProps")," object with ",(0,a.kt)("inlineCode",{parentName:"p"},"data"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"error"),", and ",(0,a.kt)("inlineCode",{parentName:"p"},"status")," properties from mutation."),(0,a.kt)("h2",{id:"faq"},"FAQ"),(0,a.kt)("h3",{id:"how-can-i-change-the-form-data-before-submitting-it-to-the-api"},"How can I change the form data before submitting it to the API?"),(0,a.kt)("p",null,"You may need to modify the form data before it is sent to the API."),(0,a.kt)("p",null,"For example, Let's send the values we received from the user in two separate inputs, ",(0,a.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"surname"),", to the API as ",(0,a.kt)("inlineCode",{parentName:"p"},"fullName"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/user/create.tsx"',title:'"pages/user/create.tsx"'},'import { Create, Drawer, useDrawerForm } from "@refinedev/antd";\nimport { Form, Input } from "antd";\nimport React from "react";\n\nexport const UserCreate: React.FC = () => {\n  // highlight-start\n  const { formProps, drawerProps, saveButtonProps } = useDrawerForm({\n    action: "create",\n  });\n  // highlight-end\n\n  // highlight-start\n  const handleOnFinish = (values) => {\n    formProps.onFinish?.({\n      fullName: `${values.name} ${values.surname}`,\n    });\n  };\n  // highlight-end\n\n  return (\n    <Drawer {...drawerProps}>\n      <Create saveButtonProps={saveButtonProps}>\n        // highlight-next-line\n        <Form {...formProps} onFinish={handleOnFinish} layout="vertical">\n          <Form.Item label="Name" name="name">\n            <Input />\n          </Form.Item>\n          <Form.Item label="Surname" name="surname">\n            <Input />\n          </Form.Item>\n        </Form>\n      </Create>\n    </Drawer>\n  );\n};\n')),(0,a.kt)("h2",{id:"api-parameters"},"API Parameters"),(0,a.kt)("h3",{id:"properties-1"},"Properties"),(0,a.kt)(k,{module:"@refinedev/antd/useDrawerForm",mdxType:"PropsTable"}),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("inlineCode",{parentName:"p"},"*"),": These props have default values in ",(0,a.kt)("inlineCode",{parentName:"p"},"RefineContext")," and can also be set on ",(0,a.kt)("strong",{parentName:"p"},"<",(0,a.kt)("a",{parentName:"strong",href:"/docs/core/refine-component"},"Refine"),">")," component. ",(0,a.kt)("inlineCode",{parentName:"p"},"useDrawerForm")," will use what is passed to ",(0,a.kt)("inlineCode",{parentName:"p"},"<Refine>")," as default but a local value will override it.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("inlineCode",{parentName:"p"},"**"),": If not explicitly configured, default value of ",(0,a.kt)("inlineCode",{parentName:"p"},"redirect")," depends which ",(0,a.kt)("inlineCode",{parentName:"p"},"action")," used. If ",(0,a.kt)("inlineCode",{parentName:"p"},"action")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"create"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"redirect"),"s default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"edit")," (created resources edit page). Otherwise if ",(0,a.kt)("inlineCode",{parentName:"p"},"action")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"edit"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"redirect"),"s default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"list"),".")),(0,a.kt)("h3",{id:"type-parameters"},"Type Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Property"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"),(0,a.kt)("th",{parentName:"tr",align:null},"Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Default"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"TQueryFnData"),(0,a.kt)("td",{parentName:"tr",align:null},"Result data returned by the query function. Extends ",(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#baserecord"},(0,a.kt)("inlineCode",{parentName:"a"},"BaseRecord"))),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#baserecord"},(0,a.kt)("inlineCode",{parentName:"a"},"BaseRecord"))),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#baserecord"},(0,a.kt)("inlineCode",{parentName:"a"},"BaseRecord")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"TError"),(0,a.kt)("td",{parentName:"tr",align:null},"Custom error object that extends ",(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#httperror"},(0,a.kt)("inlineCode",{parentName:"a"},"HttpError"))),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#httperror"},(0,a.kt)("inlineCode",{parentName:"a"},"HttpError"))),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#httperror"},(0,a.kt)("inlineCode",{parentName:"a"},"HttpError")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"TVariables"),(0,a.kt)("td",{parentName:"tr",align:null},"Values for params."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"{}")),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"TData"),(0,a.kt)("td",{parentName:"tr",align:null},"Result data returned by the ",(0,a.kt)("inlineCode",{parentName:"td"},"select")," function. Extends ",(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#baserecord"},(0,a.kt)("inlineCode",{parentName:"a"},"BaseRecord")),". If not specified, the value of ",(0,a.kt)("inlineCode",{parentName:"td"},"TQueryFnData")," will be used as the default value."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#baserecord"},(0,a.kt)("inlineCode",{parentName:"a"},"BaseRecord"))),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"TQueryFnData"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"TResponse"),(0,a.kt)("td",{parentName:"tr",align:null},"Result data returned by the mutation function. Extends ",(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#baserecord"},(0,a.kt)("inlineCode",{parentName:"a"},"BaseRecord")),". If not specified, the value of ",(0,a.kt)("inlineCode",{parentName:"td"},"TData")," will be used as the default value."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#baserecord"},(0,a.kt)("inlineCode",{parentName:"a"},"BaseRecord"))),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"TData"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"TResponseError"),(0,a.kt)("td",{parentName:"tr",align:null},"Custom error object that extends ",(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#httperror"},(0,a.kt)("inlineCode",{parentName:"a"},"HttpError")),". If not specified, the value of ",(0,a.kt)("inlineCode",{parentName:"td"},"TError")," will be used as the default value."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/core/interface-references#httperror"},(0,a.kt)("inlineCode",{parentName:"a"},"HttpError"))),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"TError"))))),(0,a.kt)("h3",{id:"return-value"},"Return Value"),(0,a.kt)("p",null,"| resourceName? | ",(0,a.kt)("inlineCode",{parentName:"p"},"string")," |\n| recordItemId? | ",(0,a.kt)("a",{parentName:"p",href:"#basekey"},(0,a.kt)("inlineCode",{parentName:"a"},"BaseKey"))," |\n| onSuccess? | ",(0,a.kt)("inlineCode",{parentName:"p"},"<TData = BaseRecord>(value: { data: TData; }) => void;")," |\n| mutationMode? | ",(0,a.kt)("a",{parentName:"p",href:"#mutationmode"},(0,a.kt)("inlineCode",{parentName:"a"},"MutationMode"))," |\n| hideText? | ",(0,a.kt)("inlineCode",{parentName:"p"},"boolean")," |"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Key"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"),(0,a.kt)("th",{parentName:"tr",align:null},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"show"),(0,a.kt)("td",{parentName:"tr",align:null},"A function that opens the drawer"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"(id?: BaseKey) => void"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"form"),(0,a.kt)("td",{parentName:"tr",align:null},"Ant Design form instance"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://ant.design/components/form/#FormInstance"},(0,a.kt)("inlineCode",{parentName:"a"},"FormInstance<TVariables>")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"formProps"),(0,a.kt)("td",{parentName:"tr",align:null},"Ant Design form props"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/ui-integrations/ant-design/hooks/use-form#properties"},(0,a.kt)("inlineCode",{parentName:"a"},"FormProps")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"drawerProps"),(0,a.kt)("td",{parentName:"tr",align:null},"Props for managed drawer"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"#drawerprops"},(0,a.kt)("inlineCode",{parentName:"a"},"DrawerProps")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"saveButtonProps"),(0,a.kt)("td",{parentName:"tr",align:null},"Props for a submit button"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"{ disabled: boolean; onClick: () => void; loading: boolean; }"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"deleteButtonProps"),(0,a.kt)("td",{parentName:"tr",align:null},"Adds props for delete button"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"{ resourceName?: string; recordItemId?: BaseKey; onSuccess?: (data: TData) => void; mutationMode?: MutationMode; hideText?: boolean; }"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"submit"),(0,a.kt)("td",{parentName:"tr",align:null},"Submit method, the parameter is the value of the form fields"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"() => void"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"open"),(0,a.kt)("td",{parentName:"tr",align:null},"Whether the drawer is open or not"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"boolean"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"close"),(0,a.kt)("td",{parentName:"tr",align:null},"Specify a function that can close the drawer"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"() => void"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"overtime"),(0,a.kt)("td",{parentName:"tr",align:null},"Overtime loading props"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"{ elapsedTime?: number }"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"autoSaveProps"),(0,a.kt)("td",{parentName:"tr",align:null},"Auto save props"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"{ data: UpdateResponse<TData>")," ","|"," ",(0,a.kt)("inlineCode",{parentName:"td"},"undefined, error: HttpError")," ","|"," ",(0,a.kt)("inlineCode",{parentName:"td"},'null, status: "loading"')," ","|"," ",(0,a.kt)("inlineCode",{parentName:"td"},'"error"')," ","|"," ",(0,a.kt)("inlineCode",{parentName:"td"},'"idle"')," ","|"," ",(0,a.kt)("inlineCode",{parentName:"td"},'"success" }'))))),(0,a.kt)("h2",{id:"example"},"Example"),(0,a.kt)(f,{path:"form-antd-use-drawer-form",mdxType:"CodeSandboxExample"}))}g.isMDXComponent=!0}}]);